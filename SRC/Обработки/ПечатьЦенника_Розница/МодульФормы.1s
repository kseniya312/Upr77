Перем ЭлементовВРяд, ЭлементовНаСтранице;
Перем Таб;

Процедура ДобавьЦенник(Товар, Цена, Единица, Номер, Производитель, Артикул)
	Если цел(номер/ЭлементовНаСтранице)-(номер/ЭлементовНаСтранице)=0 Тогда	//Надо новую страницу начинать
 		Таб.НоваяСтраница();
 	КонецЕсли;
	
	Если цел(Номер/ЭлементовВРяд)-(номер/ЭлементовВРяд)=0 Тогда	//надо новую строку начать
 		Таб.ВывестиСекцию("Товар|Ценник");
 	Иначе
 		Таб.ПрисоединитьСекцию("Товар|Ценник");
	КонецЕсли;
КонецПроцедуры

//*******************************************
Процедура Печать(парам1)
    Если парам1=1 Тогда	//Будем печатать "малышку"
		Таб = СоздатьОбъект("Таблица");
		Таб.ИсходнаяТаблица("Малышка");
		ЭлементовВРяд		= 4;
		ЭлементовНаСтранице	= 28;
		ТаблицаТоваров.ВыбратьСтроки();
		Номер=0;
		пока ТаблицаТоваров.ПолучитьСтроку()=1 Цикл
			Если ТаблицаТоваров.Флаг=2 тогда
				Состояние("Заполняем таблицу данными...");
				номер=номер+1;
				ДобавьЦенник(ТаблицаТоваров.Товар, ТаблицаТоваров.Цена, ТаблицаТоваров.Единица, номер, ТаблицаТоваров.Производитель, ТаблицаТоваров.Артикул);
			КонецЕсли;
		КонецЦикла;
	ИначеЕсли парам1=2 Тогда	//Будем печатать "Средняка"
		Таб = СоздатьОбъект("Таблица");
		Таб.ИсходнаяТаблица("Средняк");
		ЭлементовВРяд		= 3;
		ЭлементовНаСтранице	= 18;
		ТаблицаТоваров.ВыбратьСтроки();
		Номер=0;
		пока ТаблицаТоваров.ПолучитьСтроку()=1 Цикл
			Если ТаблицаТоваров.Флаг=2 тогда
				Состояние("Заполняем таблицу данными...");
				номер=номер+1;
				ДобавьЦенник(ТаблицаТоваров.Товар, ТаблицаТоваров.Цена, ТаблицаТоваров.Единица, номер, ТаблицаТоваров.Производитель, ТаблицаТоваров.Артикул);
			КонецЕсли;
		КонецЦикла;
	ИначеЕсли парам1=3 Тогда	//Будем печатать "Крупняк"
		Таб = СоздатьОбъект("Таблица");
		Таб.ИсходнаяТаблица("Крупняк");
		ЭлементовВРяд		= 2;
		ЭлементовНаСтранице	= 18;
		ТаблицаТоваров.ВыбратьСтроки();
		Номер=0;
		пока ТаблицаТоваров.ПолучитьСтроку()=1 Цикл
			Если ТаблицаТоваров.Флаг=2 тогда
				Состояние("Заполняем таблицу данными...");
				номер=номер+1;
				ДобавьЦенник(ТаблицаТоваров.Товар, ТаблицаТоваров.Цена, ТаблицаТоваров.Единица, номер, ТаблицаТоваров.Производитель, ТаблицаТоваров.Артикул);
			КонецЕсли;
		КонецЦикла;
	КонецЕсли;

	//Вызов выходного отчета в окно просмотра и редактирования.
	Таб.Опции(0,0,0,0,"ПечатьЦенников","ПечатьЦенников");
	Таб.ТолькоПросмотр(1);
	Таб.Показать("Товарные ценники","");
КонецПроцедуры  


Процедура ПриОткрытии()
	//СтатусВозврата(0);
	ДанныеДляПечати = Форма.Параметр;
	Если ТипЗначенияСтр(ДанныеДляПечати) <> "СписокЗначений" Тогда
		Возврат;
	КонецЕсли;
	ТЗ = ДанныеДляПечати.Получить("Таблица");
	ТаблицаТоваров.Загрузить(ТЗ);
	ТаблицаТоваров.ВставитьКолонку("Флаг",1,"Число",1,0,"Ф",3);
	ТаблицаТоваров.ВыводитьПиктограммы(1,1);
	ТаблицаТоваров.ВидимостьКолонки("Цена,Единица,Валюта,Производитель",0);
	ТаблицаТоваров.Заполнить(2,,,"Флаг");
//	Сформировать(ТаблицаТоваров, ПечФирма);
	
КонецПроцедуры // ПриОткрытии()

Процедура Выборка()
	Х=ТаблицаТоваров.ТекущаяСтрока();
	если ТаблицаТоваров.получитьЗначение(Х,1)=1 тогда
		ТаблицаТоваров.УстановитьЗначение(Х,1,2);
	иначе
		ТаблицаТоваров.УстановитьЗначение(Х,1,1);
	КонецЕсли;
КонецПроцедуры

Процедура Отметь(фл)
    ТаблицаТоваров.ВыбратьСтроки();
	Пока ТаблицаТоваров.получитьСтроку()=1 цикл
		Если фл=1 тогда
			ТаблицаТоваров.Флаг=2;
		иначеесли фл=2 тогда
			если ТаблицаТоваров.Флаг=1 тогда
				ТаблицаТоваров.Флаг=2;
			иначе
				ТаблицаТоваров.Флаг=1;
			конецЕсли;
		иначе
			ТаблицаТоваров.Флаг=1;
		конецЕсли;
	конецЦикла;
Конецпроцедуры

