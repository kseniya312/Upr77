//Отрабатывает фильтр внутри справочника, для отображения только элементов принадлежащих рознице
Процедура ИзменениеФильтра()
	перем ВидОтб, ЗначОтб;
	ВидОтб=""; ЗначОтб="";
	ПолучитьОтбор(ВидОтб,ЗначОтб);
	если ВидОтб="РозничныйКлиент" тогда
		УстановитьОтбор("","");
	иначе
		УстановитьОтбор("РозничныйКлиент",1);
	КонецЕсли;
КонецПроцедуры

Процедура ПриОткрытии()
	ИерархическийСписок(0,0);
	УстановитьОтбор("РозничныйКлиент",1);
	Если НазваниеНабораПрав()="Продавец_розница" Тогда
		форма.кнОтбор.Доступность(0);
		форма.кнОтбор.Видимость(0);
	КонецЕсли;
КонецПроцедуры

//******************************************************************************
//	Разграничение прав

Процедура ПриУстановкеОтбора(ИмяРеквизита, Значение)
	если (НазваниеНабораПрав()="Продавец_розница") или
		 (НазваниеНабораПрав()="Руководитель_розница")
	тогда
		Сообщить("Извините, но вы не можете изменить этот параметр!");
		СтатусВозврата(0);
	конецЕсли;
КонецПроцедуры // ПриУстановкеОтбора()

//******************************************************************************
// Предопределенная процедура.
//
Процедура ПриВыбореСтроки()
	Форма.Параметр = ТекущийЭлемент();
	Возврат;
КонецПроцедуры
               

// Валерий МЭТР:  
//******************************************************************************
// Предопределенная процедура.
Процедура ПриПереносеЭлементаВДругуюГруппу(Элемент, Группа)
	
	ГруппаРозница = ПолучитьПустоеЗначение("Справочник.Контрагенты");
	СпрКонтрагенты = СоздатьОбъект("Справочник.Контрагенты");
	Если СпрКонтрагенты.НайтиПоКоду(Константа.ПолучитьАтрибут("КодГруппыРозница")) = 1 Тогда
		ГруппаРозница = СпрКонтрагенты.ТекущийЭлемент();
	КонецЕсли;
	
	Если (ПринадлежитГруппе(ГруппаРозница) = 1)
		И ( (ИмяПользователя() <> "Симоненко") И (ИмяПользователя() <> "Филиппов") И (ИмяПользователя() <> "Иванова") И (ИмяПользователя() <> "Наира") ) Тогда
			
		Предупреждение("Вы не имеете прав на перемещение этих данных",10);
		СтатусВозврата(0);
		Возврат;
	КонецЕсли; 	
	
КонецПроцедуры